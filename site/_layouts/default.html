<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" href="/icons/favicon.ico">
		<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/icons/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x.png">
		<link rel="manifest" href="/icons/site.webmanifest">
		<link href="/resources/styles/fonts.css" rel="stylesheet" type="text/css" media="all">
		<link href="/resources/styles/checker.css" rel="stylesheet" type="text/css" media="all">
		<title>
			{{ page.title }}
		</title>
		{% seo title=false %}
		<style>
			{{ page.customcss }}
		</style>
	</head>

	<body>
		<nav>
			{% include sidebar.html %}	
		</nav>
		<div class="rightbox">
			<h6>
				Colour theme
			</h6>
			<fieldset id="colour-theme-choice">
				<div>
					<input type="radio" id="colour-theme-light" name="colour-theme" value="colour-theme-light" onclick="colourThemeLight(true); document.cookie = 'colour_theme=light; max-age=1209600; Secure';">
					<label for="colour-theme-light">Light colour theme</label>
				</div>
				<div>
					<input type="radio" id="colour-theme-dark" name="colour-theme" value="colour-theme-dark" onclick="colourThemeDark(true); document.cookie = 'colour_theme=dark; max-age=1209600; Secure';">
					<label for="colour-theme-dark">Dark colour theme</label>
				</div>
			</fieldset>
			<h6>
				Display options
			</h6>
			<fieldset id="display-bg-checker-choice">
				<input type="checkbox" id="display-bg-checker" checked>
				<label for="display-bg-checker">Display background checkerboard pattern</label>
			</fieldset>
			<p>
				These settings are saved as cookies. They expire after 14 days.
			</p>
		</div>
		<div class="content">
			<header>
				<h1>
					{{ page.header }}
				</h1>
			</header>
			<hr>
			<main>
			{{ content }}
			</main>
			<hr>
			<footer>
				<span class="small-text">
					<p>
						Page last modified: {{ page.last_modified_at | date: "%d %B %Y %H:%M:%S UTC%z" }}
					</p>
				</span>
			</footer>
		</div>
		<script>
			function colourThemeDark() {
				document.documentElement.style.setProperty('--header-colour', '{{ page.css.dark.header-colour }}');
				document.documentElement.style.setProperty('--bg-colour', '{{ page.css.dark.bg-colour }}');
				document.documentElement.style.setProperty('--bg-checkerdark', '{{ page.css.dark.bg-checkerdark }}');
				document.documentElement.style.setProperty('--bg-checkerlight', '{{ page.css.dark.bg-checkerlight }}');
				document.documentElement.style.setProperty('--bg-triangle', '{{ page.css.dark.bg-triangle }}');
				document.documentElement.style.setProperty('--sidebar-colour', '{{ page.css.dark.sidebar-colour }}');
				document.documentElement.style.setProperty('--text-colour', '{{ page.css.dark.text-colour }}');
				document.documentElement.style.setProperty('--a-colour', '{{ page.css.dark.a-colour }}');
				document.documentElement.style.setProperty('--a-visited-colour', '{{ page.css.dark.a-visited-colour }}');
				document.documentElement.style.setProperty('--a-hover-colour', '{{ page.css.dark.a-hover-colour }}');
				document.documentElement.style.setProperty('--a-active-colour', '{{ page.css.dark.a-active-colour }}');
				document.documentElement.style.setProperty('--hr-colour', '{{ page.css.dark.hr-colour }}');
			}

			function colourThemeLight() {
				document.documentElement.style.setProperty('--header-colour', '{{ page.css.light.header-colour }}');
				document.documentElement.style.setProperty('--bg-colour', '{{ page.css.light.bg-colour }}');
				document.documentElement.style.setProperty('--bg-checkerdark', '{{ page.css.light.bg-checkerdark }}');
				document.documentElement.style.setProperty('--bg-checkerlight', '{{ page.css.light.bg-checkerlight }}');
				document.documentElement.style.setProperty('--bg-triangle', '{{ page.css.light.bg-triangle }}');
				document.documentElement.style.setProperty('--sidebar-colour', '{{ page.css.light.sidebar-colour }}');
				document.documentElement.style.setProperty('--text-colour', '{{ page.css.light.text-colour }}');
				document.documentElement.style.setProperty('--a-colour', '{{ page.css.light.a-colour }}');
				document.documentElement.style.setProperty('--a-visited-colour', '{{ page.css.light.a-visited-colour }}');
				document.documentElement.style.setProperty('--a-hover-colour', '{{ page.css.light.a-hover-colour }}');
				document.documentElement.style.setProperty('--a-active-colour', '{{ page.css.light.a-active-colour }}');
				document.documentElement.style.setProperty('--hr-colour', '{{ page.css.light.hr-colour }}');
			}

			document.addEventListener("DOMContentLoaded", function(event) {
				let cookieColourScheme = document.cookie
				.split("; ")
				.find((row) => row.startsWith("colour_theme="))
				?.split("=")[1];

				if (cookieColourScheme) {
					if (cookieColourScheme === "dark") {
						colourThemeDark()
						document.getElementById("colour-theme-dark").checked = true;
						document.getElementById("colour-theme-light").checked = false;
					} else if (cookieColourScheme === "light") {
						colourThemeLight()
						document.getElementById("colour-theme-dark").checked = false;
						document.getElementById("colour-theme-light").checked = true;
					}
				} else {
					colourThemeDark()
				}

				let cookieDisplayBgChecker = document.cookie
				.split("; ")
				.find((row) => row.startsWith("display_bg_checker="))
				?.split("=")[1];

				if (cookieDisplayBgChecker) {
					if (cookieDisplayBgChecker === "false") {
						document.body.style.backgroundSize = "100lvw 100lvh, 0 0, 0 0";
						document.getElementById("display-bg-checker").checked = false;
					} else {
						document.body.style.backgroundSize = "100lvw 100lvh, 64px 64px, 64px 64px";
						document.getElementById("display-bg-checker").checked = true;
					}
				}
			})

			document.getElementById("display-bg-checker").addEventListener("change", function(event) {
				if (document.getElementById("display-bg-checker").checked) {
					document.body.style.backgroundSize = "100lvw 100lvh, 64px 64px, 64px 64px";
					document.cookie = 'display_bg_checker=true; max-age=1209600; Secure';
				} else {
					document.body.style.backgroundSize = "100lvw 100lvh, 0 0, 0 0";
					document.cookie = 'display_bg_checker=false; max-age=1209600; Secure';
				}
			})
		</script>
	</body>
</html>
